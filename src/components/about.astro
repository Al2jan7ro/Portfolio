<section class="mt-30 mb-30">
  <!-- Título -->
   <div class="flex flex-row justify-between gap-4 px-4 sm:px-8 md:px-16 lg:px-20">
    <h2 id="about-title"
      class="text-[1.8rem] sm:text-[2.2rem] md:text-[2.5rem] font-BB text-lef">
      About Me.
    </h2>
    
      <a href="/about"
        id="abt-btn"
        class="flex items-center justify-center 
              text-[1.1rem] sm:text-[1.3rem] lg:text-[1.2rem] 
              px-4 py-2 sm:px-5 sm:py-3 
              bg-black/10 tracking-normal font-roboto cursor-none 
              hover:bg-black hover:text-white 
              transition-colors rounded-xl 
              leading-none"
        >
        Show more
      </a>
    </div>

  

  <!-- Primer párrafo -->
  <div class="px-4 sm:px-8 md:ml-20 mt-4">
    <p id="about-text1"
      class="text-[1.5rem] sm:text-xl md:text-[2.3rem] lg:[2.8rem] font-Cg2 max-w-[980px] 
      text-justify indent-8 sm:indent-12 md:indent-16 leading-relaxed">
    Mi objetivo es contribuir al crecimiento de una empresa creando 
    soluciones digitales innovadoras que unan tecnología,
     diseño y usabilidad, listo para aportar y apoyar en diferentes 
     entornos tecnológicos como Ingeniero de Sistemas.
    </p>
  </div>

  <!-- Segundo párrafo -->
  <div class="flex justify-center items-center mt-20 px-4 sm:px-8">
    <p id="about-text2"
      class="text-[1.5rem] sm:text-lg lg:text-[2rem] font-Cg2
      max-w-[820px] text-justify indent-8 sm:indent-12 md:indent-16 leading-relaxed">
      Además de mis habilidades como desarrollador, también me destaco 
      como Ingeniero de Sistemas, 
      con experiencia en el área de redes y soporte técnico, lo que me
       permite tener una visión integral de la infraestructura tecnológica y
        de los sistemas que soportan las soluciones digitales.
    </p>
  </div>

  <!-- Imagen + texto -->
  <main class="flex-1 flex flex-col items-center justify-center px-4 sm:px-6 lg:px-5 mt-50 relative">
    <div id="about-image"
      class="imagebg w-[100%] mx-auto rounded-3xl lg:h-screen h-[900px]
             bg-cover bg-center relative overflow-hidden flex flex-col justify-center bg-opacity-80"
      style="background-image: url('/assets/abbg.webp');">
      <div class="absolute inset-0 bg-black/50"></div>

      <style>
        .imagebg {
          mask-image: linear-gradient(black 90%, transparent 100%);
        }
      </style>

      <div id="about-cta" class="flex flex-col items-center md:items-start text-center md:text-left px-6 md:px-50 z-40 font-BB">
        <h1 class="text-white md:text-[4.5rem] text-[3rem] mb-6">
          Transformando desafíos en soluciones y optimizando el futuro con cada línea de código.
        </h1>
        <a href="/contact"
          class="cursor-none text-lg md:text-[1.5rem] font-roboto bg-white text-black px-6 py-3 rounded-xl font-bold hover:bg-gray-500 transition-colors duration-700">
          Contactame
        </a>
      </div>
    </div>
  </main>
</section>
<script>
  import { gsap } from "gsap";
  import { ScrollTrigger } from "gsap/ScrollTrigger";

  document.addEventListener("astro:page-load", () => {
    gsap.registerPlugin(ScrollTrigger);

    let ctx = gsap.context(() => {
      // Timeline para la sección "About Me"
      const tlAbout = gsap.timeline({
        scrollTrigger: {
          trigger: "#about-title",
          start: "top 80%",
          toggleActions: "play none none none",
        },
      });

      // 1. Título
      tlAbout.from("#about-title", {
        y: 50,
        opacity: 0,
        duration: 1,
        ease: "power3.out",
      });

      // 2. Primer párrafo (bloque completo)
      tlAbout.from("#about-text1", {
        y: 40,
        opacity: 0,
        duration: 1,
        ease: "power3.out",
      }, "-=0.6");

      // 3. Segundo párrafo (bloque completo)
      tlAbout.from("#about-text2", {
        y: 40,
        opacity: 0,
        duration: 1,
        ease: "power3.out",
      }, "-=0.6");

      // 4. Imagen completa
      tlAbout.from("#about-image", {
        scale: 0.95,
        opacity: 0,
        duration: 1.5,
        ease: "power3.out",
      }, "-=0.8");

       gsap.from("#abt-btn", {
        x: 60,
        opacity: 0,
        duration: 0.8,
        ease: "power3.out",
        scrollTrigger: {
          trigger: "#abt-btn",
          start: "top 85%",
          once: true,
        },
      });
      // 5. Texto + botón sobre la imagen
      tlAbout.from("#about-cta", {
        y: 50,
        opacity: 0,
        duration: 1.2,
        ease: "power3.out",
      }, "-=0.6");
    });

    // Limpieza al cambiar de página
    document.addEventListener("astro:before-swap", () => {
      if (ctx) {
        ctx.revert();
      }
    }, { once: true });
  });
</script>
